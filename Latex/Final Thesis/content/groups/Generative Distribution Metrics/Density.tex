\subsection{Density}

Density is an automatic evaluation metric used to diagnose the performance of generative models, particularly in image synthesis. It was introduced by Naeem et al. (2020) as part of a metric pair, \textit{Density and Coverage}, designed to reliably and separately measure a model's fidelity and diversity, respectively.

These metrics work by analyzing the $k$-nearest neighbors ($k$-NN) relationships between the distributions of real and generated samples in a feature space (produced by an encoder). Density is specifically used as a proxy for the \textit{fidelity} of the generated samples—that is, how ``realistic'' they are.

Density quantifies how well-populated the generated samples are relative to the real samples in the feature space. Specifically, it counts how many real-sample neighborhood spheres contain the generated sample. A higher Density value suggests better fidelity, indicating that the generated samples fall into regions that are densely populated by real training samples.

The metric is defined mathematically as:

\begin{equation}
    \text{Density}(\{x_i^g\}_{i=1}^n, \{x_j^r\}_{j=1}^m) = \frac{1}{kn} \sum_{i=1}^n \sum_{j=1}^m \mathbb{1}\left(x_i^g \in B(x_j^r, \text{NND}_k(x_j^r))\right)
\end{equation}

\noindent where:
\begin{itemize}
    \item $\{x^g\}$: the set of $n$ generated samples.
    \item $\{x^r\}$: the set of $m$ real (training) samples.
    \item $\text{NND}_k(x_j^r)$: the distance from a real sample $x_j^r$ to its $k$-th nearest neighbor within the real set.
    \item $B(x,r)$: a Euclidean ball centered at $x$ with radius $r$.
    \item $k$: the number of neighbors (the original paper uses $k=5$).
\end{itemize}

\subsubsection*{Purpose}
Density is used as a proxy to measure sample \textbf{fidelity} (quality or realism).

\subsubsection*{Applications}
Its primary application is diagnosing the performance of generative models. The original paper uses it to evaluate image generation models on datasets like CIFAR10, ImageNet, FFHQ, and LSUN-Bedroom.

\subsubsection*{Limitations}
\begin{itemize}
    \item Its calculation is based on $k$-nearest neighbors and can be sensitive to the choice of $k$ and the number of samples used (e.g., $k=5$ and 10,000 samples).
    \item Research suggests that other metrics, like Fréchet Distance (FD) with a robust encoder (e.g., DINOv2), may correlate better with human judgments of fidelity than $k$-NN metrics like Precision (and by extension, Density).
\end{itemize}

\subsubsection{Applications}

Density was introduced to resolve the instability issues of previous nearest-neighbor metrics (like Precision), providing a more reliable signal for the engineering of high-fidelity generative models.

\begin{itemize}
    \item \textbf{Robust Fidelity Diagnosis}: Standard Precision metrics are binary (a sample is either "in" or "out" of the manifold) and can fail to detect when a model perfectly matches the training distribution. Naeem et al. (2020) apply Density to solve this "identical distribution check," allowing engineers to verify if the generator has fully converged to the target distribution. Additionally, it serves as a robust filter against outliers; unlike Precision, which can be sensitive to sparse regions, Density quantifies the accumulated evidence of realism, ensuring that generated samples inhabit the most densely populated regions of the real manifold.

    \item \textbf{Perceptual Alignment Verification}: In the context of benchmarking state-of-the-art models, Stein et al. (2023) utilize Density to audit the relationship between feature-space embedding and human perception. By comparing Density scores against human error rates, they apply this metric to demonstrate the "fidelity gap": showing that a high mathematical density in the feature space (manifold packing) does not automatically translate to visual realism for humans, particularly when evaluating modern diffusion models.
\end{itemize}

\subsubsection{Additional References}

This metric is referenced and/or used in the following papers:


\sloppy
\cite{
Stein2023MetricFlaws,
Naeem2020Reliable,
}
\fussy